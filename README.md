# fabglKeyboardJapaneseLayout
Add Japanese keyboard layout to fabgl library

3つのファイルを改定します。

1. Arduino/libraries/FabGL/src/fabutils.h

	$ diff fabutils.h fabutils.h.org<br>
	<pre>1314,1321d1313
	&lt;   VK_HANKAKU_ZENKAKU_KANJI,
	&lt;                       /**&lt; 半角/全角/漢字 */
	&lt;   VK_YEN,             /**&lt; YEN: ￥ */
	&lt;   VK_MUHENKAN,        /**&lt; 無変換 */
	&lt;   VK_HENKAN,          /**&lt; 変換 */
	&lt;   VK_KATAKANA_HIRAGANA_ROMAJI,
	&lt;                       /**&lt; カタカナ/ひらがな/ローマ字 */
	&lt; 
	</pre>	

3. Arduino/libraries/FabGL/src/devdrivers/kbdlayouts.h

	$ diff kbdlayouts.h kbdlayouts.h.org<br>
	<pre>117,119d116
	&lt; /** @brief Japanese keyboard layout */
	&lt; extern const KeyboardLayout JapaneseLayout;
	&lt; 
	123c120
	&lt;   static constexpr int LAYOUTSCOUNT = 8;
	---
	&gt;   static constexpr int LAYOUTSCOUNT = 7;
	136d132
	&lt;         JapaneseLayout.desc,
	150d145
	&lt;         JapaneseLayout.name,
	164d158
	&lt;         &amp;JapaneseLayout,
	</pre>	

4. Arduino/libraries/FabGL/src/devdrivers/kbdlayouts.cpp

	$ diff kbdlayouts.cpp kbdlayouts.cpp.org<br>
	<pre>939,999d938
	&lt; /**************************************************************************************/
	&lt; /* Japanese LAYOUT                                                                    */
	&lt; /**************************************************************************************/
	&lt; const KeyboardLayout JapaneseLayout {
	&lt;   // name
	&lt;   &quot;JP&quot;,
	&lt; 
	&lt;   // desc
	&lt;   &quot;Japanese&quot;,
	&lt; 
	&lt;   // inherited layout
	&lt;   &amp;USLayout,
	&lt; 
	&lt;   // single byte scancodes
	&lt;   {
	&lt;     { 0x0E, VK_HANKAKU_ZENKAKU_KANJI },
	&lt;     { 0x55, VK_CARET },
	&lt;     { 0x54, VK_AT },
	&lt;     { 0x5B, VK_LEFTBRACKET },
	&lt;     { 0x5D, VK_RIGHTBRACKET },
	&lt;     { 0x52, VK_COLON },
	&lt;     { 0x6A, VK_YEN },
	&lt;     { 0x51, VK_BACKSLASH },
	&lt;     { 0x67, VK_MUHENKAN },
	&lt;     { 0x64, VK_HENKAN },
	&lt;     { 0x13, VK_KATAKANA_HIRAGANA_ROMAJI },
	&lt;   },
	&lt; 
	&lt;   // extended scancodes (0xE0..)
	&lt;   {
	&lt;   },
	&lt; 
	&lt;   // virtual keys generated by other virtual keys combinations
	&lt;   //  in_key, { CTRL, LALT, RALT, SHIFT }, out_key
	&lt;   {
	&lt;     { VK_2,            { 0, 0, 0, 1 }, VK_QUOTEDBL },     // SHIFT &quot;2&quot; = &quot;&quot;&quot;
	&lt;     { VK_6,            { 0, 0, 0, 1 }, VK_AMPERSAND },    // SHIFT &quot;6&quot; = &quot;&amp;&quot;
	&lt;     { VK_7,            { 0, 0, 0, 1 }, VK_QUOTE },        // SHIFT &quot;7&quot; = &quot;&apos;&quot;
	&lt;     { VK_8,            { 0, 0, 0, 1 }, VK_LEFTPAREN },    // SHIFT &quot;8&quot; = &quot;(&quot;
	&lt;     { VK_9,            { 0, 0, 0, 1 }, VK_RIGHTPAREN },   // SHIFT &quot;9&quot; = &quot;)&quot;
	&lt;     { VK_0,            { 0, 0, 0, 1 }, VK_TILDE },        // SHIFT &quot;0&quot; = &quot;~&quot;
	&lt;     { VK_MINUS,        { 0, 0, 0, 1 }, VK_EQUALS },       // SHIFT &quot;-&quot; = &quot;=&quot;
	&lt;     { VK_CARET,        { 0, 0, 0, 1 }, VK_TILDE },        // SHIFT &quot;^&quot; = &quot;~&quot;
	&lt;     { VK_YEN,          { 0, 0, 0, 1 }, VK_VERTICALBAR },  // SHIFT &quot;￥&quot; = &quot;|&quot;
	&lt;     { VK_AT,           { 0, 0, 0, 1 }, VK_GRAVEACCENT },  // SHIFT &quot;@&quot; = &quot;`&quot;
	&lt;     { VK_SEMICOLON,    { 0, 0, 0, 1 }, VK_PLUS },         // SHIFT &quot;;&quot; = &quot;+&quot;
	&lt;     { VK_COLON,        { 0, 0, 0, 1 }, VK_ASTERISK },     // SHIFT &quot;:&quot; = &quot;*&quot;
	&lt;     { VK_BACKSLASH,    { 0, 0, 0, 1 }, VK_UNDERSCORE },   // SHIFT &quot;\&quot; = &quot;_&quot;
	&lt;   },
	&lt; 
	&lt;   // deadkeys
	&lt;   {
	&lt;   },
	&lt; 
	&lt;   // deadkeys translation
	&lt;   {
	&lt;   },
	&lt; };
	</pre>
